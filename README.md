# ğŸ“ˆ fin-aily (í•€-ì—ì¼ë¦¬)

**fin-aily**ëŠ” AI ê¸°ìˆ ì„ í™œìš©í•˜ì—¬ ë³µì¡í•œ ê¸ˆìœµ ë‰´ìŠ¤ë¥¼ íˆ¬ììì—ê²Œ ê¼­ í•„ìš”í•œ í•µì‹¬ ì •ë³´ë¡œ ì •ì œí•´ì£¼ëŠ” ìŠ¤ë§ˆíŠ¸ ì£¼ì‹ íˆ¬ì ë¹„ì„œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. "Finance + AI + Daily"ì˜ ì˜ë¯¸ë¥¼ ë‹´ì•„ ì‚¬ìš©ìê°€ ë§¤ì¼ì˜ ì‹œì¥ íë¦„ì„ ê°€ì¥ ì‰½ê³  ë¹ ë¥´ê²Œ íŒŒì•…í•  ìˆ˜ ìˆë„ë¡ ë•ìŠµë‹ˆë‹¤.

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### 1. Ticker Brief (í‹°ì»¤ ë¸Œë¦¬í•‘)
* **ì¢…ëª© ë§ì¶¤í˜• ë¶„ì„**: íŠ¹ì • í‹°ì»¤(ì˜ˆ: AAPL, TSLA)ë¥¼ ê²€ìƒ‰í•˜ë©´ í•´ë‹¹ ì¢…ëª©ê³¼ ê´€ë ¨ëœ ìµœì‹  ë‰´ìŠ¤ 10ê°œë¥¼ ì¦‰ì‹œ ìˆ˜ì§‘í•©ë‹ˆë‹¤.
* **10ì¤„ í•µì‹¬ ìš”ì•½**: ìˆ˜ì§‘ëœ ë‰´ìŠ¤ë¥¼ ë¶„ì„í•˜ì—¬ íˆ¬ìì ê´€ì ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ 10ê°œì˜ ë¶ˆë › í¬ì¸íŠ¸ë¡œ ìš”ì•½í•´ ë“œë¦½ë‹ˆë‹¤.
* **ê°ì„± ë¶„ì„ (Sentiment Analysis)**: ë‰´ìŠ¤ íë¦„ì´ ê¸ì •ì ì¸ì§€ ë¶€ì •ì ì¸ì§€ AIê°€ íŒë‹¨í•˜ì—¬ íˆ¬ì ì§€í‘œë¡œ í™œìš©í•  ìˆ˜ ìˆê²Œ ì œê³µí•©ë‹ˆë‹¤.

### 2. Market Pulse (ë§ˆì¼“ í„ìŠ¤)
* **ì‹œì¥ ì „ì²´ íë¦„ íŒŒì•…**: MarketWatchì˜ ì‹¤ì‹œê°„ Top Storiesë¥¼ ê¸°ë°˜ìœ¼ë¡œ í˜„ì¬ ê¸ˆìœµ ì‹œì¥ì˜ ë§¥ë°•ì„ ì§šì–´ì¤ë‹ˆë‹¤.
* **ë˜‘ë˜‘í•œ ë¹„ì„œ í˜ë¥´ì†Œë‚˜**: "ì£¼ì‹íˆ¬ìì— ë„ì›€ì„ ì£¼ëŠ” ë˜‘ë˜‘í•œ ë¹„ì„œ"ë¼ëŠ” íŠ¹í™”ëœ í”„ë¡¬í”„íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œì¥ ì „ì²´ì˜ ì¸ì‚¬ì´íŠ¸ë¥¼ ìš”ì•½í•©ë‹ˆë‹¤.
* **ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸**: ë³„ë„ì˜ ê²€ìƒ‰ ì—†ì´ë„ ì ‘ì† ì¦‰ì‹œ í˜„ì¬ ê°€ì¥ ëœ¨ê±°ìš´ ê²½ì œ ì´ìŠˆë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ›  Tech Stack

### Frontend
* **Framework**: Next.js 14 (App Router)
* **Styling**: Tailwind CSS
* **Environment**: Node.js v20.20.0 (WSL2)

### Backend
* **Framework**: Python FastAPI
* **Data Sourcing**: yfinance, Feedparser (RSS)
* **AI Engine**: Google Gemini 2.0 Flash, Anthropic Claude 3.5 Sonnet
* **Database**: Supabase (PostgreSQL)

---

## ğŸš€ ì‹œì‘í•˜ê¸°

### 0. ì‚¬ì „ ì¤€ë¹„

ì•„ë˜ ê³„ì • ë° ë„êµ¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.

| í•­ëª© | ìš©ë„ | ë§í¬ |
|------|------|------|
| **Node.js 18+** | í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰ | https://nodejs.org |
| **Python 3.11+** | ë°±ì—”ë“œ ì‹¤í–‰ | https://python.org |
| **Poetry** | Python íŒ¨í‚¤ì§€ ê´€ë¦¬ | https://python-poetry.org |
| **Anthropic API Key** | Claude AI ìš”ì•½ (Claude ì‚¬ìš© ì‹œ) | https://console.anthropic.com |
| **Gemini API Key** | Gemini AI ìš”ì•½ (Gemini ì‚¬ìš© ì‹œ) | https://aistudio.google.com |
| **Supabase í”„ë¡œì íŠ¸** | DB + ì¸ì¦ | https://supabase.com |

### 1. í™˜ê²½ ì„¤ì •
ë³¸ í”„ë¡œì íŠ¸ëŠ” **WSL2** í™˜ê²½ ë° **Node.js v20.20.0**ì— ìµœì í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

**Backend (`/backend/.env`)**
```env
ANTHROPIC_API_KEY=your_anthropic_api_key
GEMINI_API_KEY=your_gemini_api_key

SUPABASE_URL=your_supabase_project_url
SUPABASE_KEY=your_supabase_anon_key
SUMMARIZATION_PROVIDER=gemini  # ë˜ëŠ” claude
```

**Frontend (`/frontend/.env.local`)**
```env
NEXT_PUBLIC_SUPABASE_URL=https://xxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...
NEXT_PUBLIC_API_URL=http://localhost:8000/v1   # ë°±ì—”ë“œ ì£¼ì†Œ
```

### 2. ì‹¤í–‰ ë°©ë²•

**Backend (FastAPI)**

```bash
cd backend
poetry install
# ê°œë°œ ì„œë²„ (ìë™ ë¦¬ë¡œë“œ)
poetry run uvicorn app.main:app --reload --port 8000
# í”„ë¡œë•ì…˜ ì„œë²„
poetry run uvicorn app.main:app --host 0.0.0.0 --port 8000 --workers 4
```
ì„œë²„ ì‹¤í–‰ í›„ http://localhost:8000/docs ì—ì„œ API ë¬¸ì„œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (`DEBUG=true` í•„ìš”)


**Frontend (Next.js)**

```bash
cd frontend
npm install
npm run dev
# í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run build
npm run start
```
ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:3000 ì ‘ì†

---

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

`fin-aily`ëŠ” íš¨ìœ¨ì ì¸ ìœ ì§€ë³´ìˆ˜ë¥¼ ìœ„í•´ í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œê°€ ë¶„ë¦¬ëœ ëª¨ë…¸ë ˆí¬ êµ¬ì¡°ë¥¼ ê°€ì§‘ë‹ˆë‹¤.

```text
inv_secretary/
â”œâ”€â”€ frontend/                # Next.js 14 ê¸°ë°˜ ì›¹ ëŒ€ì‹œë³´ë“œ
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ page.tsx         # ë©”ì¸ í™ˆ (Brief/Pulse íƒ­ ë¡œì§ ë° fin-aily ë¸Œëœë“œ ì ìš©)
â”‚   â”‚   â”œâ”€â”€ layout.tsx       # ê¸€ë¡œë²Œ ë ˆì´ì•„ì›ƒ ë° í°íŠ¸ ì„¤ì •
â”‚   â”‚   â””â”€â”€ stock/[symbol]/  # ê°œë³„ ì¢…ëª© ìƒì„¸ í˜ì´ì§€
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ui/              # TickerSearch, Header ë“± ê³µìš© UI ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â””â”€â”€ news/            # DigestCard, ArticleList ë“± ë‰´ìŠ¤ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ lib/
â”‚       â”œâ”€â”€ api.ts           # ë°±ì—”ë“œ API í†µì‹  ê·œê²© (Axios)
â”‚       â””â”€â”€ supabase.ts      # í´ë¼ì´ì–¸íŠ¸ì¸¡ Supabase ì„¤ì •
â””â”€â”€ backend/                 # FastAPI ê¸°ë°˜ ë‰´ìŠ¤ ë¶„ì„ ì„œë²„
    â”œâ”€â”€ app/
    â”‚   â”œâ”€â”€ main.py          # FastAPI ì„œë²„ ì§„ì…ì  ë° ë¯¸ë“¤ì›¨ì–´ ì„¤ì •
    â”‚   â”œâ”€â”€ routers/         # API ì—”ë“œí¬ì¸íŠ¸ ì •ì˜ (news, tickers ë“±)
    â”‚   â””â”€â”€ services/        # í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
    â”‚       â”œâ”€â”€ news_service.py           # yfinance ë° RSS ë‰´ìŠ¤ ìˆ˜ì§‘
    â”‚       â””â”€â”€ summarization_service.py  # Gemini/Claude ê¸°ë°˜ AI ìš”ì•½
    â”œâ”€â”€ migrations/          # Supabase(PostgreSQL) í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ
    â””â”€â”€ pyproject.toml       # Poetry ì˜ì¡´ì„± ê´€ë¦¬ ì„¤ì •
```

---

## ğŸ’¡ API Reference

`fin-aily` ë°±ì—”ë“œ ì„œë²„ì—ì„œ ì œê³µí•˜ëŠ” ì£¼ìš” API ëª…ì„¸ì…ë‹ˆë‹¤. ëª¨ë“  ìš”ì²­ê³¼ ì‘ë‹µì€ JSON í˜•ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

### 1. ë‰´ìŠ¤ ë° ìš”ì•½ (News & Summarization)

| Endpoint | Method | Description |
| :--- | :--- | :--- |
| `/news/{symbol}` | `GET` | íŠ¹ì • ì¢…ëª©(í‹°ì»¤)ì˜ ìµœì‹  ë‰´ìŠ¤ 10ê°œë¥¼ ìˆ˜ì§‘í•˜ê³  AIê°€ 10ì¤„ ì´ë‚´ì˜ í•µì‹¬ í¬ì¸íŠ¸ë¡œ ìš”ì•½í•©ë‹ˆë‹¤. |
| `/news/market-pulse` | `GET` | MarketWatchì˜ Top Stories 10ê°œë¥¼ ê°€ì ¸ì™€ "ë˜‘ë˜‘í•œ ì£¼ì‹ íˆ¬ì ë¹„ì„œ" í˜ë¥´ì†Œë‚˜ë¥¼ í†µí•´ ì‹œì¥ ì „ì²´ì˜ ì¸ì‚¬ì´íŠ¸ë¥¼ ìš”ì•½í•©ë‹ˆë‹¤. |

### 2. ì¢…ëª© ê²€ìƒ‰ (Ticker Search)

| Endpoint | Method | Description |
| :--- | :--- | :--- |
| `/tickers/search` | `GET` | ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì¿¼ë¦¬(ì˜ˆ: "Apple" ë˜ëŠ” "AAPL")ì— ë§ëŠ” í‹°ì»¤ ì‹¬ë³¼ê³¼ ì¢…ëª©ëª…ì„ ê²€ìƒ‰í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤. |



## Supabase ì„¤ì •

### 1. í”„ë¡œì íŠ¸ ìƒì„±

1. https://supabase.com ì—ì„œ ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±
2. **Project Settings > API** ì—ì„œ `URL`, `anon key`, `service_role key` ë³µì‚¬

### 2. DB ìŠ¤í‚¤ë§ˆ ë§ˆì´ê·¸ë ˆì´ì…˜

Supabase ëŒ€ì‹œë³´ë“œ **SQL Editor**ì—ì„œ ì•„ë˜ íŒŒì¼ì˜ ë‚´ìš©ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.

```
backend/migrations/001_initial_schema.sql
```

ìƒì„±ë˜ëŠ” í…Œì´ë¸”:

| í…Œì´ë¸” | ì„¤ëª… |
|--------|------|
| `users` | ì‚¬ìš©ì í™•ì¥ í”„ë¡œí•„ |
| `tickers` | ì¢…ëª© ë§ˆìŠ¤í„° |
| `news_articles` | ìˆ˜ì§‘ëœ ë‰´ìŠ¤ ì›ë¬¸ |
| `ticker_summaries` | AI ì¢…í•© ìš”ì•½ ìºì‹œ (TTL 24h) |
| `guest_rate_limits` | ë¹„ë¡œê·¸ì¸ ì¼ì¼ ì¡°íšŒ ì œí•œ |

### 3. ì´ˆê¸° ì¢…ëª© ë°ì´í„° ì…ë ¥ (ì„ íƒ)

ìë™ì™„ì„± ê²€ìƒ‰ì„ ìœ„í•´ ì£¼ìš” ì¢…ëª©ì„ ë¯¸ë¦¬ ì…ë ¥í•©ë‹ˆë‹¤.

```sql
INSERT INTO tickers (symbol, name, exchange, sector) VALUES
  ('AAPL',  'Apple Inc.',            'NASDAQ', 'Technology'),
  ('MSFT',  'Microsoft Corporation', 'NASDAQ', 'Technology'),
  ('NVDA',  'NVIDIA Corporation',    'NASDAQ', 'Technology'),
  ('TSLA',  'Tesla Inc.',            'NASDAQ', 'Consumer Cyclical'),
  ('AMZN',  'Amazon.com Inc.',       'NASDAQ', 'Consumer Cyclical'),
  ('GOOGL', 'Alphabet Inc.',         'NASDAQ', 'Technology'),
  ('META',  'Meta Platforms Inc.',   'NASDAQ', 'Technology');
```

### 4. Auth ì„¤ì •

Supabase ëŒ€ì‹œë³´ë“œ **Authentication > Providers** ì—ì„œ ì›í•˜ëŠ” ì†Œì…œ ë¡œê·¸ì¸ì„ í™œì„±í™”í•©ë‹ˆë‹¤.
- Email (ê¸°ë³¸ í™œì„±í™”)
- Google OAuth (ì„ íƒ)


### ì£¼ìš” API ì—”ë“œí¬ì¸íŠ¸

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… | ì¸ì¦ |
|--------|------|------|------|
| `GET` | `/v1/tickers/search?q=AAPL` | í‹°ì»¤ ìë™ì™„ì„± | ë¶ˆí•„ìš” |
| `GET` | `/v1/news/{symbol}` | ë‰´ìŠ¤ + AI ì¢…í•© ìš”ì•½ | ì„ íƒ (ë¹„ë¡œê·¸ì¸ ì¼ 5íšŒ) |
| `GET` | `/v1/users/me` | ë‚´ í”„ë¡œí•„ | í•„ìš” |
| `PATCH` | `/v1/users/me` | í”„ë¡œí•„ ìˆ˜ì • | í•„ìš” |

### ë‰´ìŠ¤ API ì‘ë‹µ ì˜ˆì‹œ

```json
// GET /v1/news/AAPL?lang=ko&limit=10
{
  "symbol": "AAPL",
  "company_name": "Apple Inc.",
  "last_updated": "2026-02-17T09:30:00Z",
  "digest": {
    "summary": [
      {
        "point": "ì• í”Œì´ 1ë¶„ê¸° ë§¤ì¶œ 1,240ì–µ ë‹¬ëŸ¬ë¥¼ ê¸°ë¡í•˜ë©° ì—­ëŒ€ ìµœê³  ì‹¤ì ì„ ë‹¬ì„±í–ˆë‹¤.",
        "quote": "Apple posted record quarterly revenue of $124.3 billion, up 4 percent year over year."
      },
      {
        "point": "iPhone íŒë§¤ê°€ ì „ë…„ ëŒ€ë¹„ 12% ì¦ê°€í•˜ë©° ì‹¤ì ì„ ê²¬ì¸í–ˆë‹¤.",
        "quote": "iPhone revenue grew 12% year-over-year, driven by strong demand for the iPhone 16 lineup."
      },
      {
        "point": "ì„œë¹„ìŠ¤ ë¶€ë¬¸ ë§¤ì¶œì´ ì‚¬ìƒ ìµœê³ ì¹˜ë¥¼ ê²½ì‹ í–ˆë‹¤.",
        "quote": "Services revenue reached an all-time high of $26.3 billion, reflecting continued growth across the App Store, Apple Music, and iCloud."
      },
      {
        "point": "íŒ€ ì¿¡ CEOëŠ” ì¸ë„ ì‹œì¥ í™•ëŒ€ ì „ëµì„ ì¬í™•ì¸í–ˆë‹¤.",
        "quote": "CEO Tim Cook reaffirmed Apple's commitment to expanding its retail and manufacturing presence in India."
      },
      {
        "point": "AI ê¸°ëŠ¥ íƒ‘ì¬ í™•ëŒ€ë¡œ ASP ìƒìŠ¹ì´ ì˜ˆìƒëœë‹¤.",
        "quote": "Analysts expect Apple Intelligence features to drive a higher average selling price in upcoming iPhone models."
      }
    ],
    "sentiment": { "score": 0.74, "label": "Positive" },
    "based_on_articles": 10
  },
  "articles": [
    {
      "id": 1234,
      "title": "Apple Reports Record Q1 Revenue",
      "source": "Yahoo Finance",
      "url": "https://finance.yahoo.com/...",
      "published_at": "2026-02-17T08:00:00Z"
    }
  ]
}
```


## ë°°í¬

### ë°±ì—”ë“œ â€” Railway

1. [railway.app](https://railway.app) ì—ì„œ ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±
2. GitHub ì €ì¥ì†Œ ì—°ê²° í›„ `backend/` ë””ë ‰í† ë¦¬ë¥¼ ë£¨íŠ¸ë¡œ ì§€ì •
3. **Variables** íƒ­ì—ì„œ `.env` í™˜ê²½ ë³€ìˆ˜ ì…ë ¥
4. Start Command ì„¤ì •:
   ```
   poetry run uvicorn app.main:app --host 0.0.0.0 --port $PORT
   ```

### í”„ë¡ íŠ¸ì—”ë“œ â€” Vercel

1. [vercel.com](https://vercel.com) ì—ì„œ ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±
2. GitHub ì €ì¥ì†Œ ì—°ê²° í›„ **Root Directory** ë¥¼ `frontend/` ë¡œ ì§€ì •
3. **Environment Variables** ì—ì„œ ì•„ë˜ ì…ë ¥:
   ```
   NEXT_PUBLIC_SUPABASE_URL=...
   NEXT_PUBLIC_SUPABASE_ANON_KEY=...
   NEXT_PUBLIC_API_URL=https://your-backend.railway.app/v1
   ```
4. ë°°í¬ ì™„ë£Œ í›„ ë°±ì—”ë“œì˜ `CORS_ORIGINS` ì— Vercel ë„ë©”ì¸ ì¶”ê°€

---

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

**Q. `yfinance`ë¡œ ë‰´ìŠ¤ê°€ ìˆ˜ì§‘ë˜ì§€ ì•ŠëŠ”ë‹¤**

yfinanceì˜ Yahoo Finance ì˜ì¡´ì„±ì´ ì°¨ë‹¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `news_service.py`ì˜ RSS ë°±ì—… ì†ŒìŠ¤ê°€ ìë™ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤. NewsAPIë¥¼ ì¶”ê°€ë¡œ ì—°ë™í•˜ë ¤ë©´ `.env`ì— `NEWSAPI_KEY`ë¥¼ ì¶”ê°€í•˜ê³  `news_service.py`ì— í•¸ë“¤ëŸ¬ë¥¼ êµ¬í˜„í•˜ì„¸ìš”.

**Q. LLM ì‘ë‹µì´ JSON í˜•ì‹ì´ ì•„ë‹Œ ê²½ìš°**

`summarization_service.py`ì˜ `_build_prompt` í•¨ìˆ˜ì—ì„œ "ë°˜ë“œì‹œ JSONë§Œ ì¶œë ¥" ì§€ì‹œê°€ ìˆìœ¼ë‚˜, ê°„í˜¹ ëª¨ë¸ì´ ë§ˆí¬ë‹¤ìš´ íœìŠ¤ë¥¼ ë¶™ì´ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì½”ë“œì—ì„œ ìë™ìœ¼ë¡œ ì œê±°ë©ë‹ˆë‹¤. ê³„ì† ë¬¸ì œê°€ ë˜ë©´ ë‹¤ë¥¸ providerë¡œ ì „í™˜í•´ë³´ì„¸ìš” (`SUMMARIZATION_PROVIDER=gemini`), ë˜ëŠ” `summarization_service.py`ì˜ `CLAUDE_MODEL`ì„ `claude-sonnet-4-5-20250929`ë¡œ ì˜¬ë ¤ë³´ì„¸ìš”.

**Q. Supabase ë¬´ë£Œ í‹°ì–´ ìš©ëŸ‰ ì´ˆê³¼**

`ticker_summaries` í…Œì´ë¸”ì˜ ì˜¤ë˜ëœ ìºì‹œë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ì •ë¦¬í•˜ëŠ” ì¿¼ë¦¬ë¥¼ Supabase **Scheduled Functions**ì— ë“±ë¡í•˜ì„¸ìš”.

```sql
DELETE FROM ticker_summaries
WHERE created_at < NOW() - INTERVAL '7 days';
```

**Q. CORS ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤**

ë°±ì—”ë“œ `.env`ì˜ `CORS_ORIGINS`ì— í”„ë¡ íŠ¸ì—”ë“œ ì£¼ì†Œê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.

```env
CORS_ORIGINS=["http://localhost:3000", "https://your-app.vercel.app"]
```
